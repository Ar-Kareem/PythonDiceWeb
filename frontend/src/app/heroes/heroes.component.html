<div class="main">

  <!-- TOGGLE SIDEBAR BUTTON -->
  <div [ngClass]="{'margin-right-bttn': true, 'hidden-bttn': (sidebarVisible$ | async)}">
    <p-button (onClick)="toggleSidebar()" rounded="true" icon="pi pi-bars" styleclass="w-2rem h-2rem p-0" label=""></p-button>
  </div>

  <!-- SIDEBAR -->
  <p-sidebar [visible]="(sidebarVisible$ | async)!" [modal]="false" class="left-panel" [showCloseIcon]="true"
    (onHide)="toggleSidebar()"
  >
    <ng-template pTemplate="closeicon">
      <i class="pi pi-arrow-left"></i> 
    </ng-template>
    <h3>Sidebar</h3>
    <p>
        Lorem ipsum dolor sit amet...
    </p>
  </p-sidebar>





  <div class="main-content">

    <div [ngClass]="{'shifted': (sidebarVisible$ | async)}"></div>

    <div class="inpout-content">

      <app-tabview />

      <div *ngFor="let tab of allTabs; let i = index">
        <div class="code-input" [ngClass]="{'myhidediv': selectedTabIndex !== i}" *ngIf="TabsWithInput.includes(tab.title)">
          <textarea
            rows="20"
            pInputTextarea 
            autofocus 
            [ngModel]="ngContentsInput.get(tab.title)"
            (ngModelChange)="onInputChange($event, tab.title)"
            (keydown.tab)="onInputKeyPress($event, 'tab')"
            (keydown.enter)="onInputKeyPress($event, 'enter')"
            (keydown.shift.enter)="onInputKeyPress($event, 'shift-enter')"
            (keydown.control.enter)="onInputKeyPress($event, 'shift-enter')"
            (keydown.control.tab)="onInputKeyPress($event, 'shift-enter')"
          ></textarea>
        </div>
      </div>

      <p-progressBar *ngIf="isLoading" mode="indeterminate" [style]="{ height: '6px' }" />

      <div class="bttn-padding" *ngIf="selectedTab?.title !== TabTitles.GUI">
        <p-button 
          pButton 
          pRipple 
          label="Calculate"
          [ngClass]="{'calculate-bttn': true}"
          (click)="onButtonClick()" 
        />
      </div>

      <ng-container *ngFor="let tab of allTabs; let i = index">
        <div class="code-output" [ngClass]="{'myhidediv': selectedTabIndex !== i}"  *ngIf="ngContentsOutput.get(tab.title) && TabsWithOutput.includes(tab.title)">
          <textarea
            #autoResizeTextarea
            pInputTextarea
            [readOnly]="true"
            [autoResize]="true"
            [ngModel]="ngContentsOutput.get(tab.title)"
          ></textarea>
        </div>
        <!-- GUI -->
        <div *ngIf="tab.title === TabTitles.GUI && i === selectedTabIndex">
          <app-gui-output [inputXML]="ngContentsInput.get(TabTitles.GUI) ?? ''"></app-gui-output>
        </div>
      </ng-container>

    </div>

  </div>
</div>

